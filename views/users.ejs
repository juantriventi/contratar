<!DOCTYPE html>
<html>
<head>
  <title>Home</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    .card {
      overflow: hidden;
      transition: height 1s;
    }
    .card.expanded {
      height: auto;
    }
    .arrow-down {
      transform: rotate(0deg);
      transition: transform 0.2s;
    }
    .expanded .arrow-down {
      transform: rotate(180deg);
    }
    .breadcrumb {
      display: none;
      margin-top: -15px;
      padding: 10px;
      background-color: transparent;
    }
    .expanded .breadcrumb {
      display: block;
    }
  </style>
</head>
<body class="bg-gray-100 mt-4">
  <div class="bg-white p-8 rounded-lg shadow-md w-5/6 mx-auto mt-4 mb-auto">
    <% if (user) { %>
      <h1 class="text-2xl font-bold mb-4 flex justify-between items-center">
        <span>Bienvenido, <%= user.username %></span>
        <span>
          <a href="/profile" class="text-blue-500 hover:underline">Ver Perfil</a>
          <span class="mx-2">|</span>
          <a href="/logout" class="text-blue-500 hover:underline">Cerrar Sesión</a>
        </span>
      </h1>
      <h2 class="text-lg font-semibold mt-4 mb-4">Contrata a alguien:</h2>
      <div class="grid grid-cols-2 gap-4">
        <% users.forEach((user, index) => { %>
          <div class="bg-gray-200 rounded-lg shadow-md card">
            <div class="p-4 flex items-center cursor-pointer">
              <img src="<%= user.profileImage %>" alt="<%= user.username %>'s Profile" class="rounded-full w-8 h-8 object-cover mr-2">
              <div class="flex-1">
                <div class="flex items-center">
                  <span class="font-semibold mr-2"><%= user.username %></span>
                </div>
                <span class="text-sm text-gray-600">$<%= user.price %>/hr</span>
              </div>
              <div class="ml-auto arrow-down">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down" viewBox="0 0 16 16">
                  <path d="M2.56 5.44a.5.5 0 0 0 .688.062L8 1.207l4.756 4.295a.5.5 0 1 0 .624-.78l-5-4.5a.5.5 0 0 0-.624 0l-5 4.5a.5.5 0 0 0-.062.687z"/>
                </svg>
              </div>
            </div>
            <div class="breadcrumb p-4">
              <h2 class="text-lg font-semibold">Descripción:</h2>
              <% if (user.description && user.description.length > 0) { %>
                <p><%= user.description %></p>
              <% } else { %>
                <p class="text-center">Este usuario no tiene descripción.</p>
              <% } %>
            </div>
          </div>
        <% }); %>        
      </div>
    <% } else { %>
      <p>No estás logueado. Por favor <a href="/login" class="text-blue-500 hover:underline">inicia sesión</a>.</p>
    <% } %>
  </div>

  <script>
document.addEventListener("DOMContentLoaded", function () {
  const cards = document.querySelectorAll(".card");
  cards.forEach((card) => {
    card.addEventListener("click", function () {
      this.classList.toggle("expanded");
    });
    const arrow = card.querySelector(".arrow-down");
    arrow.addEventListener("click", function (event) {
      event.stopPropagation();
      card.classList.toggle("expanded");
    });
    const breadcrumb = card.querySelector(".breadcrumb");
    breadcrumb.addEventListener("click", function (event) {
      event.stopPropagation(); // Detiene la propagación del evento de clic
    });
  });
});

  </script>
</body>
</html>
