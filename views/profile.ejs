<!DOCTYPE html>
<html lang="es">
<head>
  <title><%= user.fullName %> | Perfil</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="images/AR.png" type="image/x-icon">
  <link rel="stylesheet" href="/css/styles.css">
  <link
  href="https://cdn.jsdelivr.net/npm/daisyui@2.6.0/dist/full.css"
  rel="stylesheet"
  type="text/css"
/>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white min-h-screen">
  
    <!-- NavBar -->
    <%- include('partials/navbar') %>
    <div class="bg-primary-content pb-10 py-3 mt-5">
  <div style="display: flex; justify-content: center; align-items: center; height: 80vh;">
    <div class="bg-white p-4 mt-5 md:p-8 rounded-lg shadow-md w-full md:w-2/3 lg:w-1/2">
    <div class="text-center">
    <!-- Enlace "Editar foto" -->
    <a href="#" class="text-blue-500 hover:underline" id="editPhotoLink">
      <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">
        <path d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"/>
      </svg>
    </a>
    </div>
    <h1 class="text-2xl font-bold mb-4 text-center">Tu perfil</h1>
    <ul>
      <li class="flex items-center flex-col">
        <img src="<%= user.profileImage %>" alt="" class="rounded-full w-20 h-20 object-cover">
        <h5 class="font-semibold mt-2"><%= user.fullName %></h5>
      </li>
    </ul>
      <!-- Contenedor para el formulario y el botón de carga -->
  <div id="photoFormContainer" class="text-center" style="display: none;">
    <form action="/update-profile-image" method="POST" class="mt-4" enctype="multipart/form-data">
      <label for="profileImage">Selecciona una imagen de perfil:</label><br>
      <input type="file" name="profileImage" id="profileImage" accept="image/*" class="text-sm text-slate-500
      file:mr-4 file:py-2 file:px-4
      file:rounded-full file:border-0
      file:text-sm file:font-semibold
      file:bg-violet-200 file:text-violet-600
      hover:file:bg-violet-300
    " /><br>
      <button type="submit" class="bg-violet-600 text-white px-4 py-2 rounded-lg mt-2 text-center">Subir imagen</button>
    </form>    
  </div>
  <h2 class="text-lg font-semibold mt-4 mb-4">Descripción:</h2>
  <p><%= user.description %></p>

 <!-- Contenedor para el formulario de edición de descripción -->
<div id="descriptionFormContainer" class="text-center" style="display: none;">
    <form action="/update-profile-description" method="POST" class="mt-4">
      <label for="description">Agrega una descripción:</label>
      <textarea name="description" id="description" class="w-64 px-4 py-2 border rounded" placeholder="Conta en pocas palabras a que te dedicas." maxlength="150" style="display: flex; justify-content: center; margin:auto; margin-top: 10px;"></textarea>
      <button type="submit" class="bg-violet-600 text-white px-4 py-2 rounded-lg mt-2 text-center">Actualizar Descripción</button>
    </form>
  </div>
  <div class="flex text-center items-center justify-center p-2">
      <!-- Botón para editar la descripción -->
      <a href="#" class="text-violet-600 hover:underline mx-2" id="editDescriptionLink">Editar descripción</a>
</div>
</div>

<script src="/utils/profileForms.js"></script>
</body>
</html>
